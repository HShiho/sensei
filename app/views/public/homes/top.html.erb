<div class="row">

  <!--サイドバー-->
  <div class="col-4 mb-5 pr-4 border-right border-info">
    <%= render partial: 'layouts/user_info',locals: { user: @user, goal: @goal } %><br>
    <%= render partial: 'calendar' ,locals: { post: @post } %><br>
    <%= render partial: 'public/posts/new',locals: { new_post: @new_post } %>
  </div>

  <div class="d-felx flex-column col-8 pl-4">
    <div class="border border-info mb-4 p-4">
      こんにちは、<%= @current_user.nickname %>さん！<br>
      今日はどんな一日になりましたか？<br>
      一日を振り返って、達成度を投稿しましょう！
    </div>

<!--現在の目標-->
    <div class="border border-primary my-4 p-4">
      <div class="h5 text-primary">現在の目標</div>
      <div class="d-flex bd-highlight py-2">
        <div class="bd-highlight text-info">最終目標　　：　</div>
        <div class="bd-highlight">
          <% if @goal.present? %>
            <%= @goal.title %>
          <% else %>
            マイページで目標を設定しましょう
          <% end %>
          </div>
        <div class="bd-highlight ml-auto">
          <% if @goal.present? %>
            <span>
              <%= link_to '完了',public_goal_path(@goal), method: :patch, class: "btn btn-outline-danger" %>
            </span>
          <% end %>
        </div>
      </div>

      <div class="d-flex bd-highlight py-2">
        <div class="bd-highlight text-info">今月の目標　：　</div>
        <div class="bd-highlight">
          <% if @objective_month.present? %>
            <%= @objective_month.title %>
          <% elsif @goal.present? %>
            目標が設定されていません
          <% else %>
            まずは最終目標を設定しましょう
          <% end %>
        </div>
        <div class="bd-highlight ml-auto">
          <% if @objective_month.present? %>
            <% if @objective_month.did_it == "" && @objective_month.could_not == "" %>
              <span><%= link_to '振り返る',edit_public_objective_path(@objective_month), class: "btn btn-outline-success" %></span>
            <% else %>
            <% end %>
          <% end %>
          <% if @goal.present? %>
            <span><%= link_to '設定',new_public_objective_path, class: "btn btn-outline-info" %></span>
          <% end %>
        </div>
      </div>

      <div class="d-flex bd-highlight py-2">
        <div class="bd-highlight text-info">今週の目標　：　</div>
        <div class="bd-highlight">
          <% if @objective_week.present? %>
            <%= @objective_week.title %>
          <% elsif @goal.present? %>
            目標が設定されていません
          <% else %>
            まずは最終目標を設定しましょう
          <% end %>
        </div>
        <div class="bd-highlight ml-auto">
          <% if @objective_week.present? %>
            <% if @objective_week.did_it == "" && @objective_week.could_not == "" %>
              <span><%= link_to '振り返る',edit_public_objective_path(@objective_week), class: "btn btn-outline-success" %></span>
            <% else %>
            <% end %>
          <% end %>
          <% if @goal.present? %>
            <span><%= link_to '設定',new_public_objective_path, class: "btn btn-outline-info" %></span>
          <% end %>
        </div>
      </div>

      <div class="d-flex bd-highlight py-2">
        <% if @objective_day.present? %>
          <div class="bd-highlight text-info"><%= @objective_day.created_at.since(1.days).strftime('%m/%d') %>の目標 ：　</div>
          <div class="bd-highlight">
            <%= @objective_day.tomorrow_objective %>
          </div>
        <% end %>
      </div>
    </div>

<!--中期目標一覧-->
    <% if @goal.present? %>
      <div class="border border-info mt-5 p-4">
        <div class="text-primary pb-3">中期目標一覧</div>
        <div class="d-flex bd-highlight">
          <div class="bd-highlight text-info">月の目標</div>
          <div class="bd-highlight flex-grow-1">
            <div class="pl-4 overflow-auto"  style="height:150px;">
              <% @objectives_months.each do |month| %>
                <i class="fa-solid fa-fire-flame-curved"></i> <%= month.title %><br>
                  <% if month.did_it.present? %>　<i class="fa-solid fa-crop"></i>　<%= month.did_it %><br><% end %>
                  <% if month.could_not.present? %>　<i class="fa-solid fa-crop-simple"></i>　<%= month.could_not %><br><% end %>
              <% end %>
            </div>
          </div>
        </div>
        <div class="d-flex bd-highlight mt-3">
          <div class="bd-highlight text-info">週の目標</div>
          <div class="bd-highlight flex-grow-1">
            <div class="pl-4 overflow-auto"  style="height:150px;">
              <% @objectives_weeks.each do |week| %>
                <i class="fa-solid fa-fire-flame-curved"></i> <%= week.title %><br>
                  <% if week.did_it.present? %>　<i class="fa-solid fa-crop"></i>　<%= week.did_it %><br><% end %>
                  <% if week.could_not.present? %>　<i class="fa-solid fa-crop-simple"></i>　<%= week.could_not %><br><% end %>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>


<!--タグ新規作成-->
    <div class="border border-success mt-5 p-4">
      <div class="text-success pb-3">タグ新規作成</div>
      <%= form_tag({controller:"homes", action:"top"}, method: :get) do %>
        <%= text_field_tag :tag %>
        <%= submit_tag 'タグを追加' %>
      <% end %>
    </div>

  </div>


</div>